(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,r){e.exports=r(32)},25:function(e,t,r){},30:function(e,t,r){},31:function(e,t,r){},32:function(e,t,r){"use strict";r.r(t);var i=r(0),n=r.n(i),s=r(5),a=r.n(s),u=(r(25),r(6)),c=r(7),l=r(10),o=r(8),d=r(11),p=r(9),m=function(e){return e.filter(function(e){return e.trips.length>0})},h=function(e){return function(t,r){console.log("data: ",e);var i=r().busSchedule.busArr,n={trips:[],id:i.length+1};t({type:"ON_TRIP_SELECT",payload:e}),(r().busSchedule.selectedTrip?r().busSchedule.selectedTrip.id:null)?i.push(n):i=m(i),t(function(e){return{type:"ON_ADD_PROVISIONAL_BUS",payload:e}}(i))}},T=function(e){return function(t,r){var i,n=r().busSchedule.tripsArr,s=r().busSchedule.busArr,a=r().busSchedule.busOfSelectedTrip,u=s[e],c=r().busSchedule.selectedTrip?r().busSchedule.selectedTrip.id:"";if(i=n.find(function(e){return e.id===c}),f(u.trips,i)){t(function(e){return{type:"REJECT_ASSIGN_TRIP",payload:e}}(m(s)))}else{c&&(a.trips=a.trips.filter(function(e){return e.id!==c}),s[a.idx]=a),u.trips.push(i),s[e]=u;var l=s.filter(function(e){return e.trips&&0!==e.trips.length});t({type:"ACCEPT_ASSIGN_TRIP",payload:{busArr:l,targetBusIdx:e,selectedTripObj:i}})}}},f=function(e,t){var r=!1,i=e.sort(function(e,t){return e.startTime-t.startTime});if(e.filter(function(e){return e.id===t.id}).length>0)return r;for(var n=0;n<i.length;n++)if(i[n].startTime<t.startTime&&i[n].endTime>t.startTime||i[n].startTime>=t.startTime&&i[n].endTime<=t.endTime||i[n].startTime<t.endTime&&i[n].endTime>t.endTime){r=!0;break}return r},b=function(e){return n.a.createElement("div",{className:"BusRow ".concat(e.selectedTrip?"is-hoverable":"")},n.a.createElement("div",{className:"BusRow__left"},n.a.createElement("span",null,e.trips.length?"Bus: ".concat(e.busIdx+1):"New Bus"),e.trips&&e.trips.length?n.a.createElement("span",{className:"BusRow__time-window"},e.calculateTimeframe({trips:e.trips,timeframe:"earliest"})," ","-"," ",e.calculateTimeframe({trips:e.trips,timeframe:"latest"})," "):""),n.a.createElement("div",{className:"BusRow__right"},console.log("props.selectedTrip: ",e),e.selectedTrip&&!f(e.trips,e.selectedTrip)?n.a.createElement("div",{onClick:function(){return e.onAssignTrip(e.busIdx)},className:"BusRow__trip BusRow__trip_potential",style:{left:e.selectedTrip.startTime,width:e.calculateWidth(e.selectedTrip.startTime,e.selectedTrip.endTime)}},"+"):"",e.trips&&e.trips.length?e.trips.map(function(t,r){return n.a.createElement("div",{key:r,className:"BusRow__trip ".concat(e.selectedTrip&&t.id===e.selectedTrip.id?"is-selected":""),onClick:function(r){return e.onTripSelect(r,t,e.busIdx)},style:{left:t.startTime,width:e.calculateWidth(t.startTime,t.endTime)}},t.id)}):""))},S=function(e){return n.a.createElement("div",{className:"ScheduleTimeline__hour",style:{left:e.min}},e.hour||0===e.hour?"".concat(e.hour,":00"):"")},_=[{id:1,startTime:30,endTime:150},{id:2,startTime:180,endTime:300},{id:3,startTime:330,endTime:450},{id:4,startTime:40,endTime:130},{id:5,startTime:160,endTime:250},{id:6,startTime:280,endTime:370},{id:7,startTime:400,endTime:490},{id:8,startTime:80,endTime:240},{id:9,startTime:280,endTime:430}],y=(r(30),function(e){function t(){var e,r;Object(u.a)(this,t);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(r=Object(l.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).calculateWidth=function(e,t){return t-e},r.calculateTimeframe=function(e){var t,r=[];return e.trips.forEach(function(t){r.push("earliest"===e.timeframe?t.startTime:t.endTime)}),(t="earliest"===e.timeframe?Math.min.apply(Math,r):Math.max.apply(Math,r))&&t!==1/0&&t!==-1/0&&(t=new Date(1e3*t).toISOString().substr(15,4)),t},r.onTripSelect=function(e,t,i){e.stopPropagation(),r.props.dispatch(h({trip:t,busIdx:i}))},r.onAssignTrip=function(e){r.props.busSchedule.selectedTrip&&r.props.dispatch(T(e))},r.renderErrors=function(){return r.props.busSchedule.errors.length?n.a.createElement("p",{className:"BusSchedule__error"},r.props.busSchedule.errors[0]):""},r.renderTimeline=function(){return n.a.createElement("div",{className:"BusSchedule__timeline"},r.props.busSchedule.scheduleTimeInHours&&r.props.busSchedule.scheduleTimeInHours.map(function(e){return n.a.createElement(S,{key:e.hour,hour:e.hour,min:e.min})}))},r.renderBusRows=function(){var e=r.props.busSchedule.busArr;return e.length?e.map(function(t,i){return t.trips&&t.trips.length||i===e.length-1?n.a.createElement(b,{onTripSelect:r.onTripSelect,onAssignTrip:r.onAssignTrip,key:i,busIdx:i,id:t.id,selectedTrip:r.props.busSchedule.selectedTrip?r.props.busSchedule.selectedTrip:"",calculateWidth:r.calculateWidth,calculateTimeframe:r.calculateTimeframe,trips:t.trips}):""}):n.a.createElement("p",{className:"BusSchedule__message"},"No bus schedule data")},r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.dispatch((e=_,function(t){for(var r=[],i=[],n={},s=[{hour:0,min:0}],a=0;a<=720;)++a%60!==0&&0!==a||s.push({hour:a/60,min:a});e&&e.length&&e.forEach(function(e){r.push(e),i.push({trips:[e]})}),n.updatedTripsArr=r,n.busArr=i,n.scheduleTimeInHours=s,t({type:"ON_BUS_SCHEDULE_LOAD",payload:n})}))}},{key:"render",value:function(){return n.a.createElement("section",{className:"BusSchedule"},n.a.createElement("div",{className:"BusSchedule__inner"},this.renderTimeline(),this.renderBusRows(),this.renderErrors()))}}]),t}(i.Component)),E=Object(p.b)(function(e){return{busSchedule:e.busSchedule}})(y),A=(r(31),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"AppBody"},n.a.createElement("header",{className:"AppBody__header"},n.a.createElement("h5",null,"Bus Scheduling")),n.a.createElement(E,null))}}]),t}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var v=r(1),O=r(3),g={tripsArr:[],busArr:[],errors:[],selectedTrip:null},w=Object(v.c)({busSchedule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ON_BUS_SCHEDULE_LOAD":return Object(O.a)({},e,{tripsArr:t.payload.updatedTripsArr,busArr:t.payload.busArr,scheduleTimeInHours:t.payload.scheduleTimeInHours});case"ON_TRIP_SELECT":var r,i=e.busArr[t.payload.busIdx];return r=e.selectedTrip&&t.payload.trip.id===e.selectedTrip.id?null:t.payload.trip,Object(O.a)({},e,{selectedTrip:r,busOfSelectedTrip:i,errors:[]});case"ON_ADD_PROVISIONAL_BUS":return Object(O.a)({},e,{busArr:t.payload});case"ACCEPT_ASSIGN_TRIP":return Object(O.a)({},e,{busArr:t.payload.busArr,selectedTrip:null,errors:[]});case"REJECT_ASSIGN_TRIP":var n=e.errors;return n.push("A bus can only do one trip at a time. Try a different time slot."),Object(O.a)({},e,{selectedTrip:null,busArr:t.payload,errors:n});default:return e}}}),I=r(18),N=r(19),B=r.n(N),j=Object(v.a)(I.a,B.a),R=Object(v.d)(w,j);a.a.render(n.a.createElement(p.a,{store:R},n.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.9457acdb.chunk.js.map